---
layout: post
title:  Redis Introduction
date:   2014-12-05 19:23:45
author: jyootai
disqus: y
categories: blog
---

Redis 如今已经成为了Web开发社区中最火热的内存数据库之一,凭借其全面的功能得到越来越多的公司的青睐，国内如新浪微博、街旁和知乎,国外如GitHub、StackOverflow、Flickr、暴雪和Instagram,都是Redis的用户。

那么 Redis 究竟是什么？简单点说Redis 是一个开源的高性能键值对数据库。它通过提供多种键值数据类型来适应不同场景下的存储需求,并借助许多高层级的接口使其可以胜任如缓存、队列系统等不同的角色。

下面通过介绍 Redis 的特性来让大家更进一步的了解 redis .

**1, 存储结构**

Redis 以字典结构存储数据，并允许其他应用通过TCP协议读写字典中的内容。代码 `dict["key"]="value"` 中的 dict 是字典中的结构变量，字符串"key"是键名,而"value"是键值,在字典中我们可以获取或设置键名对应的键值,也可以删除一个键。

Redis字典中的键值支持的数据类型:

>
* 字符串类型
* 散列（哈希）类型
* 列表类型
* 集合类型
* 有序集合类型

这种字典形式的存储结构与常见的 MySQL 等关系数据库的二维表形式的存储结构有很大的差异。

举个例子，一篇文章会有以下内容存储在 article 这个变量中:

{% highlight ruby %}
article["title"]="Redis Introduction!"
article["content"]="Redis is an open source, BSD licensed, advanced key-value cache and store...."
article["tag"] =[ "Redis","Database"]
{% endhighlight %}

现在我们希望将这篇文章的数据存储在数据库中,并且要求可以通过标签检索出文章。

使用关系数据库存储： 一般会将其中的标题、正文存储在一个表中,而将标签存储在另一个表中,然后使用第三个表连接文章和标签表。需要查询时还得将三个表进行连接,这样做很麻烦。

Redis 存储： 直接映射到 Redis 中,数据在 Redis 中的存储形式和其在程序中的存储方式非常相近。

另外一个优势： 对不同的数据类型提供了非常方便的操作方式,如使用集合类型存储文章标签,Redis 可以对标签进行如交集、并集这样的集合运算操作轻易地实现“找出所有同时属于A标签和B标签且不属于C标签”这样关系数据库实现起来性能不高且较为繁琐的操作。

**2, 内存存储与持久化**

Redis 数据库中的所有数据都存储在内存中。由于内存的读写速度远快于硬盘,因此 Redis 在性能上对比其他基于硬盘存储的数据库有非常明显的优势,在一台普通的笔记本电脑上,Redis 可以在一秒内读写超过十万个键值。

将数据存储在内存中也有问题,例如,程序退出后内存中的数据会丢失。不过 Redis 提供了对持久化的支持,即将可以内存中的数据异步写入到硬盘中,同时不影响继续提供服务。

**3, 功能丰富**

Redis 除了作为数据库外，还可将其作为缓存系统、队列系统。

>作为缓存系统：

Redis 可以为每个键设置生存时间(Time To Live,TTL),生存时间到期后键会自动被删除。这一功能配合出色的性能让 Redis 可以作为缓存系统来使用,而且由于 Redis 支持持久化和丰富的数据类型,使其成为了另一个非常流行的缓存系统 Memcached 的有力竞争者。

在性能上 Redis 是单线程模型,而 Memcached 支持多线程,所以在多核服务器上后者的性能更高一些。然而,前面已经介绍过,Redis 的性能已经足够优异,在绝大部分场合下其性能都不会成为瓶颈。所以在使用时更应该关心的是二者在功能上的区别,如果需要用到高级的数据类型或是持久化等功能,Redis 将会是 Memcached 很好的替代品。

作为缓存系统,Redis 还可以限定数据占用的最大内存空间,在数据达到空间限制后可以按照一定的规则自动淘汰不需要的键。

>作为队列系统

Redis 的列表类型键可以用来实现队列,并且支持阻塞式读取,可以很容易地实现一个高性能的优先级队列。同时在更高层面上,Redis 还支持“发布/订阅”的消息模式,可以基于此构建聊天室等系统。

**4, 简单稳定**

Redis 直观的存储结构使得通过程序与 Redis 交互十分简单。在 Redis 中使用命令来读写数据,就像用 SQL 语句操作关系型数据库。

例如在关系数据库中要获取 users 表内 id 为 1 的记录的 name 字段的值:

	使用如下SQL语句实现:
	-> SELECT name FROM users WHERE id=1 LIMIT 1

	使用 Redis 命令语句实现:
	-> HGET post:1 title

其中 `HGET` 就是 Redis 的一个命令，Redis 提供了一百多个命令,常用的也就那么十几个,并且每个命令都很容易记忆。

---

其实可以通过这么几个关键词来描述 Redis ： `键值对存储`，`内存存储`，`持久化`，`数据类型丰富`，`查询高效`， `操作方便`







